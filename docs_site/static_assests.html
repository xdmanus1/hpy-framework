<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPY Application (static_assests)</title>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython_stdlib.js"></script>
    <style>
/* --- Start Combined CSS (static_assests.html) --- */
/* Layout: _layout.hpy */
/* Minimal layout-specific styles if needed */
        .sidebar nav ul { list-style: none; padding-left: 0; }
        .sidebar nav ul li { margin: 0.5em 0; }
        .sidebar nav ul a.active { font-weight: bold; text-decoration: underline; }

        /* Basic code block styling */
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1em;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        code {
            font-family: monospace;
            background-color: #eee;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }
        pre code { background-color: transparent; padding: 0; border-radius: 0; }

/* Page: static_assests.hpy */
/* Static Assets page specific styles */
/* --- End Combined CSS --- */
    </style>
</head>
<body onload="brython({'debug': 1})">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Use Brython - maybe for interactive examples later? -->
    <script src="https://cdn.jsdelivr.net/npm/brython@{{ BRYTHON_VERSION }}/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@{{ BRYTHON_VERSION }}/brython_stdlib.js"></script>
    <!-- Link to docs-specific CSS -->
    <link rel="stylesheet" href="/static/docs.css">
    <!-- Title will be set per page ideally, but fallback -->
    <title>HPY Tool Documentation</title>
    <style>
        /* Minimal layout-specific styles if needed */
        .sidebar nav ul { list-style: none; padding-left: 0; }
        .sidebar nav ul li { margin: 0.5em 0; }
        .sidebar nav ul a.active { font-weight: bold; text-decoration: underline; }

        /* Basic code block styling */
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1em;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        code {
            font-family: monospace;
            background-color: #eee;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }
        pre code { background-color: transparent; padding: 0; border-radius: 0; }
    </style>
</head>
<body onload="brython({{'debug': 0}})"> <!-- Disable debug for docs usually -->
    <div class="docs-container">
        <aside class="sidebar">
            <h2>HPY Tool Docs</h2>
            <nav>
                <ul>
                    <li><a href="/index.html" id="nav-index">Introduction</a></li>
                    <li><a href="/getting-started.html" id="nav-getting-started">Getting Started</a></li>
                    <li><a href="/configuration.html" id="nav-configuration">Configuration (hpy.toml)</a></li>
                    <li><a href="/static-assets.html" id="nav-static-assets">Static Assets</a></li>
                    <li><a href="/hpy-files.html" id="nav-hpy-files">.hpy File Structure</a></li>
                    <li><a href="/cli-usage.html" id="nav-cli-usage">CLI Usage</a></li>
                    <!-- Add more links as pages are created -->
                </ul>
            </nav>
        </aside>
        <main class="content">
            <!-- Page content injected here -->
            <h1>Static Assets</h1>

<p><code>hpy-tool</code> provides built-in support for handling static assets like CSS files, JavaScript files, images, fonts, and other resources that need to be served alongside your compiled HTML pages.</p>

<h2>Enabling Static Asset Handling</h2>
<p>To enable this feature, you must:</p>
<ol>
    <li>Define the <code>static_dir_name</code> setting within the <code>[tool.hpy]</code> table in your <code>hpy.toml</code> file.</li>
    <li>Ensure the directory named by <code>static_dir_name</code> exists within your configured <code>input_dir</code>.</li>
</ol>

<p>Example <code>hpy.toml</code> enabling static assets in <code>src/static/</code>:</p>
<pre><code>[tool.hpy]
input_dir = "src"
output_dir = "dist"
# This line enables the feature for the directory named "static"
static_dir_name = "static"</code></pre>

<p>If <code>static_dir_name</code> is commented out or not present in <code>hpy.toml</code>, static asset handling is disabled.</p>

<h2>How it Works</h2>

<p>When static asset handling is enabled:</p>
<ul>
    <li><strong>During Build (`hpy` or `hpy src`):</strong> The entire contents of the source static directory (<code><input_dir>/<static_dir_name>/</code>) are recursively copied into the output directory, preserving the directory structure, under the same name (<code><output_dir>/<static_dir_name>/</code>). For example, <code>src/static/css/style.css</code> becomes <code>dist/static/css/style.css</code>. The copy operation uses <code>shutil.copytree</code> with <code>dirs_exist_ok=True</code>, so it handles updates correctly on subsequent builds.</li>
    <li><strong>During Watch Mode (`hpy -w`):</strong> The watcher monitors the source static directory for changes:
        <ul>
            <li><strong>Create/Modify:</strong> When a file or directory is created or modified within the source static directory, it is copied (or updated) to the corresponding location in the output static directory.</li>
            <li><strong>Delete:</strong> When a file or directory is deleted from the source static directory, the corresponding file or directory is removed from the output static directory.</li>
            <li><strong>Rename/Move:</strong> Renaming or moving files/directories within the static directory is handled by deleting the old target path and copying to the new target path.</li>
        </ul>
    </li>
    <li><strong><code>.hpy</code> File Exclusion:</strong> Any <code>.hpy</code> files placed inside the designated static directory are ignored by the page compilation process. They are treated simply as static files and will be copied as-is.</li>
</ul>

<h2>Referencing Static Assets</h2>
<p>When referencing static assets in your HTML (e.g., in `_layout.hpy` or page files) or CSS, use paths relative to the root of the output directory.</p>
<p>Since the static assets are copied into <code><output_dir>/<static_dir_name>/</code>, you typically reference them starting with <code>/<static_dir_name>/</code>.</p>

<p>Examples (assuming <code>static_dir_name = "static"</code>):</p>
<ul>
    <li>Linking a CSS file (<code>src/static/css/theme.css</code>):
        <pre><code><link rel="stylesheet" href="/static/css/theme.css"></code></pre>
    </li>
    <li>Displaying an image (<code>src/static/images/logo.png</code>):
        <pre><code><img src="/static/images/logo.png" alt="My Logo"></code></pre>
    </li>
    <li>Referencing a font in CSS (<code>src/static/fonts/font.woff2</code>):
        <pre><code class="language-css">@font-face {
  font-family: 'MyFont';
  src: url('/static/fonts/font.woff2') format('woff2');
}</code></pre>
    </li>
</ul>

<p>The development server correctly serves these files from the output directory.</p>
        </main>
    </div>

    <footer>
        <p>HPY Tool Documentation | BSD 3-Clause Licensed</p>
    </footer>

    <script type="text/python">
    # Simple Python to highlight the active nav link
    from browser import window, document

    current_path = window.location.pathname
    nav_links = document.select('.sidebar nav a')

    for link in nav_links:
        link_href = link.attrs.get('href', '')
        # Basic matching, handles trailing / or .html
        if current_path == link_href or \
           current_path == link_href.replace('.html', '') or \
           current_path == link_href + 'index.html' or \
           current_path.replace('.html', '') == link_href:
            link.classList.add('active')
            # Update page title based on active link text
            document.title = f"{link.text} | HPY Tool Docs"
            break
    else:
         # Fallback for index if no other match
         if current_path == '/' or current_path.endswith('/index.html'):
              index_link = document.select_one('#nav-index')
              if index_link:
                   index_link.classList.add('active')
                   document.title = f"{index_link.text} | HPY Tool Docs"

    print("Docs layout script loaded.")
    </script>
</body>

<script type="text/python">
# --- Start Combined Python (static_assests.html) ---

# --- HPY Tool Helper Functions (Injected) ---
from browser import document
import sys as _hpy_sys # Alias to avoid user conflicts
def byid(element_id):
    # Shortcut for document[element_id]. Returns None if ID not found.
    try: return document[element_id]
    except KeyError: return None
def qs(selector):
    # Shortcut for document.select_one(selector). Returns None if not found.
    return document.select_one(selector)
def qsa(selector):
    # Shortcut for document.select(selector). Returns a list (possibly empty).
    return document.select(selector)
# --- End Helper Functions ---

# Layout: _layout.hpy


# Page: static_assests.hpy
print("Static Assets page script loaded.")
# --- End Combined Python ---
</script>

</body>
</html>